(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38],{6329:function(e,s,t){Promise.resolve().then(t.bind(t,1678))},1678:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return C}});var a=t(7437),l=t(2265),r=t(4033),i=t(1396),n=t.n(i),c=t(2899),d=t(8203),o=t(5883),m=t(9883),x=t(2482),h=t(6141),u=t(1295),p=t(5750),g=t(632),f=t(4082),v=t(1359),b=t(4493),y=t(5298),j=t(5925),N=t(2549),w=t(6020);function k(e){let{eventId:s,eventTitle:t,inviteCode:r,onClose:i}=e,[n,c]=(0,l.useState)(""),[d,o]=(0,l.useState)(""),[m,x]=(0,l.useState)(!1),h=async e=>{e.preventDefault(),x(!0);try{let e=n.split(",").map(e=>e.trim()).filter(e=>e);if(0===e.length){j.default.error("Please enter at least one email address");return}let s=await fetch("/api/send-invitations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:r,emails:e,message:d||"You're invited to \"".concat(t,'"!')})}),a=await s.json();if(!s.ok)throw Error(a.error);j.default.success("Invitations sent successfully!"),i()}catch(e){j.default.error("Error sending invitations: "+e.message)}finally{x(!1)}},u="".concat("https://levmanzhai.github.io/Smart-Event-Planner","/view-event?id=").concat(r);return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Send Invitations"}),(0,a.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(N.Z,{className:"h-6 w-6"})})]}),(0,a.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Addresses *"}),(0,a.jsx)("textarea",{value:n,onChange:e=>c(e.target.value),className:"input-field resize-none",rows:3,placeholder:"email1@example.com, email2@example.com, email3@example.com",required:!0}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separate email addresses with commas"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),(0,a.jsx)("textarea",{value:d,onChange:e=>o(e.target.value),className:"input-field resize-none",rows:3,placeholder:"You're invited to \"".concat(t,'"!')})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Event Link:"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"text",value:u,readOnly:!0,className:"flex-1 text-xs bg-white border border-gray-300 rounded px-2 py-1"}),(0,a.jsx)("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(u),j.default.success("Link copied!")},className:"btn-secondary text-xs px-2 py-1",children:"Copy"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:i,className:"flex-1 btn-secondary",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:m,className:"flex-1 btn-primary disabled:opacity-50",children:m?(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"Send"]})})]})]})]})})})}function C(){let[e,s]=(0,l.useState)([]),[t,i]=(0,l.useState)([]),[N,w]=(0,l.useState)("all"),[C,S]=(0,l.useState)(!0),[Z,E]=(0,l.useState)(null),[I,_]=(0,l.useState)(!1),[O,z]=(0,l.useState)(null),[M,J]=(0,l.useState)(!1),T=(0,r.useRouter)();(0,l.useEffect)(()=>{L(),P()},[]),(0,l.useEffect)(()=>{F()},[e,N]);let L=async()=>{let{data:{user:e}}=await c.O.auth.getUser();if(!e){T.push("/auth");return}E(e)},P=async()=>{try{let{data:{user:e}}=await c.O.auth.getUser();if(!e)return;let{data:t,error:a}=await c.O.from("events").select("*").eq("created_by",e.id).order("event_date",{ascending:!0});if(a)throw a;s(t||[])}catch(e){j.default.error("Error loading events"),console.error(e)}finally{S(!1)}},F=()=>{let s=[...e];switch(N){case"today":s=e.filter(e=>(0,f.Z)((0,b.Z)(e.event_date)));break;case"thisWeek":s=e.filter(e=>(0,v.Z)((0,b.Z)(e.event_date)));break;default:s=e}i(s)},A=async()=>{await c.O.auth.signOut(),T.push("/")},W=e=>{let s="".concat("https://levmanzhai.github.io/Smart-Event-Planner","/view-event?id=").concat(e);navigator.clipboard.writeText(s),j.default.success("Link copied to clipboard!")},Y=e=>{z(e),_(!0)};return C?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading events..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[(0,a.jsx)("header",{className:"bg-white/90 backdrop-blur-md border-b border-gray-200/50 shadow-sm",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,a.jsxs)(n(),{href:"/",className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[(0,a.jsx)(d.Z,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary-600"}),(0,a.jsx)("span",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:"Smart Event Planner"})]}),(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:["Hello, ",null==Z?void 0:Z.email]}),(0,a.jsxs)("button",{onClick:A,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Sign Out"})]})]}),(0,a.jsx)("button",{className:"md:hidden p-2 rounded-lg hover:bg-gray-100",onClick:()=>J(!M),children:(0,a.jsxs)("div",{className:"w-6 h-6 flex flex-col justify-center space-y-1",children:[(0,a.jsx)("div",{className:"h-0.5 bg-gray-600 w-full"}),(0,a.jsx)("div",{className:"h-0.5 bg-gray-600 w-full"}),(0,a.jsx)("div",{className:"h-0.5 bg-gray-600 w-full"})]})})]}),M&&(0,a.jsx)("div",{className:"md:hidden py-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center space-x-2 text-gray-600",children:(0,a.jsx)("span",{className:"text-sm",children:null==Z?void 0:Z.email})}),(0,a.jsxs)("button",{onClick:A,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 w-full text-left",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Sign Out"})]})]})})]})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 text-center sm:text-left",children:[(0,a.jsxs)("div",{className:"mb-4 sm:mb-0",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Events"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your events and invitations"})]}),(0,a.jsxs)(n(),{href:"/events/create",className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 inline-flex items-center transform hover:scale-105",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 mr-2"}),"Create Event"]})]}),(0,a.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-4 sm:p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-2",children:(0,a.jsx)(x.Z,{className:"h-5 w-5 text-white"})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Filters"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:flex sm:space-x-3 gap-3",children:[{key:"all",label:"All Events"},{key:"today",label:"Today"},{key:"thisWeek",label:"This Week"}].map(e=>{let{key:s,label:t}=e;return(0,a.jsx)("button",{onClick:()=>w(s),className:"w-full sm:w-auto px-6 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ".concat(N===s?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200 hover:shadow-md"),children:t},s)})})]})}),0===t.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(d.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"all"===N?"You have no events yet":"No events for the selected filter"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"all"===N?"Create your first event to start planning":"Try selecting a different filter or create a new event"}),(0,a.jsx)(n(),{href:"/events/create",className:"btn-primary",children:"Create Event"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map(e=>(0,a.jsxs)("div",{className:"group relative bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 border border-white/20 overflow-hidden ".concat(e.image_url?"":"h-fit"),children:[e.image_url?(0,a.jsxs)("div",{className:"relative overflow-hidden",children:[(0,a.jsx)("img",{src:e.image_url,alt:e.title,className:"w-full h-56 object-cover group-hover:scale-105 transition-transform duration-300"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}):(0,a.jsx)("div",{className:"h-4"}),(0,a.jsxs)("div",{className:"".concat(e.image_url?"p-6 space-y-4":"p-4 space-y-3"),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"".concat(e.image_url?"text-xl":"text-lg"," font-bold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors"),children:e.title}),e.description&&(0,a.jsx)("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-2",children:e.description})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-500 text-sm bg-gray-50 rounded-lg px-3 py-2",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2 text-blue-500"}),(0,a.jsx)("span",{className:"font-medium",children:(0,g.Z)((0,b.Z)(e.event_date),"dd MMMM yyyy",{locale:y.Z})}),(0,a.jsx)("span",{className:"mx-2 text-gray-300",children:"•"}),(0,a.jsx)("span",{className:"font-medium",children:e.event_time})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 pt-2",children:[(0,a.jsxs)("button",{onClick:()=>W(e.invite_code),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium text-xs py-2.5 px-2 rounded-lg transition-colors duration-200 flex items-center justify-center",children:[(0,a.jsx)(u.Z,{className:"h-3 w-3 mr-1"}),(0,a.jsx)("span",{className:"truncate",children:"Copy"})]}),(0,a.jsxs)("button",{onClick:()=>Y(e),className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium text-xs py-2.5 px-2 rounded-lg transition-all duration-200 flex items-center justify-center shadow-md hover:shadow-lg",children:[(0,a.jsx)(u.Z,{className:"h-3 w-3 mr-1"}),(0,a.jsx)("span",{className:"truncate",children:"Send"})]}),(0,a.jsxs)(n(),{href:"/view-event?id=".concat(e.invite_code),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium text-xs py-2.5 px-2 rounded-lg transition-colors duration-200 flex items-center justify-center",children:[(0,a.jsx)(p.Z,{className:"h-3 w-3 mr-1"}),(0,a.jsx)("span",{className:"truncate",children:"View"})]})]})]})]},e.id))})]}),I&&O&&(0,a.jsx)(k,{eventId:O.id,eventTitle:O.title,inviteCode:O.invite_code,onClose:()=>{_(!1),z(null)}})]})}},2899:function(e,s,t){"use strict";t.d(s,{O:function(){return l}});var a=t(359);let l=(0,a.eI)("https://kyiaeylescnvlhvgwfwb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt5aWFleWxlc2Nudmxodmd3ZndiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE2MTAxNDgsImV4cCI6MjA3NzE4NjE0OH0.iZDfEzCnqNyFh94KAeBIel2Pvd_FPELNLsduivJyL-g")}},function(e){e.O(0,[673,17,864,971,472,744],function(){return e(e.s=6329)}),_N_E=e.O()}]);