(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[135],{2549:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},144:function(e,t,a){Promise.resolve().then(a.bind(a,9200))},9200:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var r=a(7437),s=a(2265),l=a(4033),n=a(1396),i=a.n(n),c=a(2899),d=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,d.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),u=(0,d.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var m=a(2549),h=a(5925);function g(){let[e,t]=(0,s.useState)(""),[a,n]=(0,s.useState)(""),[d,g]=(0,s.useState)(""),[x,p]=(0,s.useState)(""),[v,f]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),[j,N]=(0,s.useState)(!1),[w,k]=(0,s.useState)(!1),E=(0,s.useRef)(null),C=(0,l.useRouter)();(0,s.useEffect)(()=>{I()},[]);let I=async()=>{let{data:{user:e}}=await c.O.auth.getUser();e||C.push("/auth")},D=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?k(!0):"dragleave"===e.type&&k(!1)},O=e=>{if(e.type.startsWith("image/")){f(e);let t=new FileReader;t.onload=e=>{var t;y(null===(t=e.target)||void 0===t?void 0:t.result)},t.readAsDataURL(e)}else h.default.error("Please select an image")},S=async e=>{try{let t=e.name.split(".").pop(),a="".concat(Date.now(),".").concat(t),r="event-images/".concat(a),{error:s}=await c.O.storage.from("event-images").upload(r,e);if(s)throw s;let{data:l}=c.O.storage.from("event-images").getPublicUrl(r);return l.publicUrl}catch(e){return console.error("Error uploading image:",e),null}},F=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),_=async t=>{t.preventDefault(),N(!0);try{let{data:{user:t}}=await c.O.auth.getUser();if(!t)throw Error("User not authenticated");let r=null;if(v&&!(r=await S(v))){h.default.error("Error uploading image");return}let s=F(),{error:l}=await c.O.from("events").insert({title:e,description:a||null,event_date:d,event_time:x,image_url:r,created_by:t.id,invite_code:s});if(l)throw l;h.default.success("Event created successfully!"),C.push("/events")}catch(e){h.default.error("Error creating event: "+e.message)}finally{N(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("main",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)(i(),{href:"/events",className:"flex items-center text-gray-600 hover:text-gray-900",children:[(0,r.jsx)(o,{className:"h-5 w-5 mr-2"}),"Back"]})}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Create Event"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Fill out the form below to create a new event"})]}),(0,r.jsxs)("form",{onSubmit:_,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title *"}),(0,r.jsx)("input",{type:"text",id:"title",required:!0,className:"input-field",placeholder:"e.g. Anna's Birthday Party",value:e,onChange:e=>t(e.target.value)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"eventDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Date *"}),(0,r.jsx)("input",{type:"date",id:"eventDate",required:!0,className:"input-field",value:d,onChange:e=>g(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"eventTime",className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Time *"}),(0,r.jsx)("input",{type:"time",id:"eventTime",required:!0,className:"input-field",value:x,onChange:e=>p(e.target.value)})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Description"}),(0,r.jsx)("textarea",{id:"description",rows:4,className:"input-field resize-none",placeholder:"Tell us more about the event...",value:a,onChange:e=>n(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Photo"}),b?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:b,alt:"Preview",className:"w-full h-64 object-cover rounded-lg"}),(0,r.jsx)("button",{type:"button",onClick:()=>{f(null),y(null),E.current&&(E.current.value="")},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:(0,r.jsx)(m.Z,{className:"h-4 w-4"})})]}):(0,r.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors ".concat(w?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-gray-400"),onDragEnter:D,onDragLeave:D,onDragOver:D,onDrop:e=>{e.preventDefault(),e.stopPropagation(),k(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&O(e.dataTransfer.files[0])},children:[(0,r.jsx)(u,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drag image here"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"or"}),(0,r.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.click()},className:"btn-secondary",children:"Choose File"}),(0,r.jsx)("input",{ref:E,type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&O(e.target.files[0])},className:"hidden"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[(0,r.jsx)(i(),{href:"/events",className:"btn-secondary",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:j||!e||!d||!x,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:j?"Creating...":"Create Event"})]})]})]})]})})}},2899:function(e,t,a){"use strict";a.d(t,{O:function(){return s}});var r=a(359);let s=(0,r.eI)("https://kyiaeylescnvlhvgwfwb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt5aWFleWxlc2Nudmxodmd3ZndiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE2MTAxNDgsImV4cCI6MjA3NzE4NjE0OH0.iZDfEzCnqNyFh94KAeBIel2Pvd_FPELNLsduivJyL-g")}},function(e){e.O(0,[326,575,971,472,744],function(){return e(e.s=144)}),_N_E=e.O()}]);